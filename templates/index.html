{% extends "base.html" %}
{% block title %}Social Feed{% endblock %}
{% block content %}

{% if session.get('username') %}
<div class="card mb-4">
    <div class="card-body">
        <form action="/post" method="POST">
            <textarea class="form-control mb-2" name="content" placeholder="What's on your mind?" required></textarea>
            <button class="btn btn-primary" type="submit">Post</button>
        </form>
    </div>
</div>
{% else %}
<div class="alert alert-info">Please <a href="/login">login</a> or <a href="/register">register</a> to post.</div>
{% endif %}

{% for post in posts %}
<div class="card mb-3">
    <div class="card-body">
        <h6 class="card-subtitle mb-1 text-muted">
            {{ post.user.username }}
        </h6>
        <small class="text-secondary">
            {{ post.timestamp.strftime("%b %d, %Y %I:%M %p") }}
        </small>
        <p class="card-text mt-2">{{ post.content }}</p>
    </div>
</div>
{% endfor %}

{% endblock %}
